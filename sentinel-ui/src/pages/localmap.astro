---
import GameLayout from '../layouts/GameLayout.astro';
import LocalMapPage from '../components/localmap/LocalMapPage';
---

<GameLayout title="SENTINEL - Local Map">
  {/* Install React Refresh stubs before any .tsx modules load.
      Astro's @astrojs/react integration doesn't inject the Vite
      React preamble for client:only islands, so .tsx modules throw
      "@vitejs/plugin-react can't detect preamble" at runtime.
      These no-op stubs satisfy the check without enabling HMR.
      MUST appear before the island element in the DOM. */}
  <script is:inline>
    if (typeof window !== 'undefined' && !window.$RefreshReg$) {
      window.$RefreshReg$ = function() {};
      window.$RefreshSig$ = function() { return function(type) { return type; }; };
    }
  </script>

  <div class="localmap-page">
    <LocalMapPage client:only="react" />
  </div>
</GameLayout>

<style>
  .localmap-page {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: #000;
  }
</style>
